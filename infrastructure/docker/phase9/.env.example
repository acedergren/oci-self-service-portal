# =============================================================================
# OCI Self-Service Portal - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values
#   cp .env.example .env
#
# SECURITY: Never commit .env files with real credentials to version control
# =============================================================================

# ---------------------------------------------------------------------------
# Oracle Database Configuration
# ---------------------------------------------------------------------------
ORACLE_USER=ADMIN
ORACLE_PASSWORD=your_database_password_here
ORACLE_DSN=langflowdb_high
ORACLE_WALLET_LOCATION=/wallets/langflow
ORACLE_WALLET_PASSWORD=your_wallet_password_here

# Full connection string (alternative to individual vars)
# DATABASE_URL=oracle://ADMIN:password@langflowdb_high

# ---------------------------------------------------------------------------
# OCI Configuration
# ---------------------------------------------------------------------------
OCI_REGION=eu-frankfurt-1
OCI_AUTH_METHOD=config_file
OCI_COMPARTMENT_OCID=ocid1.compartment.oc1..aaaaaaaarekfofhmfup6d33agbnicuop2waas3ssdwdc7qjgencirdgvl3iq

# ---------------------------------------------------------------------------
# Better Auth Configuration
# ---------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your_secret_here_min_32_chars
# Generate with: openssl rand -base64 32
WEBHOOK_ENCRYPTION_KEY=your_base64_32_byte_key_here

# Cookie policy (shared by Better Auth + Fastify)
# BETTER_AUTH_COOKIE_SAMESITE=lax   # lax | strict | none
# BETTER_AUTH_COOKIE_SECURE=true    # force Secure cookies outside production

# OIDC Provider (OCI IAM Identity Domains)
OIDC_CLIENT_ID=your_client_id_here
OIDC_CLIENT_SECRET=your_client_secret_here
OIDC_ISSUER=https://idcs-xxxx.identity.oraclecloud.com

# ---------------------------------------------------------------------------
# API Configuration
# ---------------------------------------------------------------------------
# Internal Docker network URL (service-to-service)
API_URL=http://api:3001

# Public API URL (browser requests go through nginx TLS termination)
PUBLIC_API_URL=https://localhost/api

# ---------------------------------------------------------------------------
# Logging & Monitoring
# ---------------------------------------------------------------------------
LOG_LEVEL=info
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# ---------------------------------------------------------------------------
# Feature Flags (Phase 9)
# ---------------------------------------------------------------------------
# Enable Fastify backend (false = use SvelteKit API routes)
ENABLE_FASTIFY_BACKEND=true

# Percentage of traffic to route to Fastify (0-100)
FASTIFY_ROLLOUT_PERCENTAGE=0

# ---------------------------------------------------------------------------
# Docker Configuration
# ---------------------------------------------------------------------------
# Path to Oracle wallet on host machine
WALLET_PATH=/data/wallets

# TLS termination (nginx)
HTTP_PORT=80
HTTPS_PORT=443
TLS_CERT_PATH=./certs
TLS_KEY_PATH=./certs
DH_PARAMS_PATH=./certs/dhparam.pem

# Let's Encrypt (optional, with docker compose --profile letsencrypt)
TLS_DOMAIN=portal.example.com
CERTBOT_EMAIL=ops@example.com

# Container resource limits
API_MEMORY_LIMIT=2g
API_CPU_LIMIT=1.0
FRONTEND_MEMORY_LIMIT=1g
FRONTEND_CPU_LIMIT=0.5

# ---------------------------------------------------------------------------
# Development Configuration (docker-compose.dev.yml)
# ---------------------------------------------------------------------------
# Node.js inspector port for debugging
NODE_INSPECTOR_PORT=9229

# Vite dev server port
VITE_PORT=5173

# Vite HMR WebSocket port
VITE_HMR_PORT=24678
