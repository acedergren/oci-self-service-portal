---
phase: 10-foundation-rewrite
plan: 17
type: execute
wave: 14
depends_on:
  - 10-09
  - 10-16
files_modified:
  - apps/frontend/src/routes/admin/agents/+page.svelte
  - apps/frontend/src/routes/admin/workflows/runs/+page.svelte
  - apps/frontend/src/routes/admin/tools/playground/+page.svelte
  - apps/frontend/src/lib/components/admin/AgentStreamPanel.svelte
  - apps/frontend/src/lib/components/admin/WorkflowRunTable.svelte
  - apps/frontend/src/lib/components/admin/ToolPlaygroundCard.svelte
  - apps/frontend/src/tests/phase10/admin-agents.test.ts
  - apps/frontend/src/tests/phase10/admin-tools.test.ts
autonomous: true
must_haves:
  truths:
    - "Admin agents page streams agent activity in real time using Fastify SSE endpoints."
    - "Workflow runs page displays live execution state with pause/resume controls."
    - "Tool playground executes tools via Fastify API and shows raw responses and metadata."
  artifacts:
    - path: "apps/frontend/src/routes/admin/agents/+page.svelte"
      provides: "Admin agent playground UI"
    - path: "apps/frontend/src/routes/admin/workflows/runs/+page.svelte"
      provides: "Workflow run monitoring UI"
    - path: "apps/frontend/src/tests/phase10/admin-agents.test.ts"
      provides: "Regression tests for admin agents page"
  key_links:
    - from: "apps/frontend/src/routes/admin/agents/+page.svelte"
      to: "/api/admin/agents"
      via: "fetch"
      pattern: "fetch\(.*\/api\/admin/agents"
    - from: "apps/frontend/src/routes/admin/workflows/runs/+page.svelte"
      to: "/api/admin/workflows/runs"
      via: "fetch"
      pattern: "fetch\(.*\/api\/admin/workflows/runs"
---

<objective>
Build admin console pages for agents, workflow runs, and tool playground to consume the new Fastify SSE endpoints and SDK-backed tools.

Purpose: Deliver the admin experience portion of the PRD prior to observability design verification.
Output: Svelte admin pages, supporting components, and tests.
</objective>

<execution_context>
@/Users/acedergr/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/acedergr/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.claude/reference/PRD.md
@apps/frontend/src/routes/admin/agents/+page.svelte
</context>

<tasks>

<task type="auto">
  <name>Implement admin agent streaming UI</name>
  <files>apps/frontend/src/routes/admin/agents/+page.svelte</files>
  <action>
  - Build TanStack Query + SSE integration to stream agent messages and tool calls from `/api/admin/agents/:id/stream`.
  - Display latency, model selection, token usage metadata.
  - Provide chat input for testing agents.
  </action>
  <verify>pnpm --filter @portal/frontend lint</verify>
  <done>Admin agents page renders streaming data with lint passing.</done>
</task>

<task type="auto">
  <name>Create workflow run monitoring page</name>
  <files>apps/frontend/src/routes/admin/workflows/runs/+page.svelte</files>
  <action>
  - Surface workflow run list with filters and detail panel streaming events from `/api/admin/workflows/runs/:runId/stream`.
  - Provide pause/resume/cancel buttons wired to Fastify endpoints.
  </action>
  <verify>pnpm --filter @portal/frontend lint</verify>
  <done>Workflow runs page displays live execution data with controls.</done>
</task>

<task type="auto">
  <name>Enhance tool playground</name>
  <files>apps/frontend/src/routes/admin/tools/playground/+page.svelte</files>
  <action>
  - Add execution form using `@portal/server` tool registry metadata and execute via `/api/tools/execute`.
  - Display raw OCI response, execution time, and approval preview per PRD.
  - Update tests (`admin-agents.test.ts`, `admin-tools.test.ts`) to cover new flows, mocking SSE/tool responses.
  </action>
  <verify>pnpm --filter @portal/frontend test --run tests/phase10/admin-agents.test.ts tests/phase10/admin-tools.test.ts</verify>
  <done>Tool playground executes tools and tests validate new behavior.</done>
</task>

</tasks>

<verification>
- `pnpm --filter @portal/frontend lint`
- `pnpm --filter @portal/frontend test --run tests/phase10/admin-agents.test.ts tests/phase10/admin-tools.test.ts`
</verification>

<success_criteria>

- Admin agent, workflow run, and tool playground pages function with streaming/tool execution supported and tests passing.
  </success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-rewrite/10-17-SUMMARY.md`
</output>
