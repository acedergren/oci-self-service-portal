---
phase: 10-foundation-rewrite
plan: 18
type: execute
wave: 15
depends_on:
  - 10-17
files_modified:
  - apps/frontend/src/routes/admin/observability/+page.svelte
  - apps/frontend/src/lib/components/admin/ObservabilityDashboard.svelte
  - apps/frontend/src/tests/phase10/admin-observability.test.ts
  - apps/frontend/src/tests/phase10/admin-screenshots.test.ts
autonomous: false
must_haves:
  truths:
    - "Admin observability page visualizes agent traces, workflow timelines, and cost metrics."
    - "Automated tests capture observability data rendering correctness."
    - "Human review validates design iteration with browser feedback."
  artifacts:
    - path: "apps/frontend/src/routes/admin/observability/+page.svelte"
      provides: "Observability dashboard route"
    - path: "apps/frontend/src/tests/phase10/admin-observability.test.ts"
      provides: "Vitest coverage for observability UI"
    - path: "apps/frontend/src/tests/phase10/admin-screenshots.test.ts"
      provides: "Playwright screenshot workflow for design iteration"
  key_links:
    - from: "apps/frontend/src/routes/admin/observability/+page.svelte"
      to: "/api/admin/observability"
      via: "fetch"
      pattern: "fetch\(.*\/api\/admin/observability"
    - from: "apps/frontend/src/tests/phase10/admin-screenshots.test.ts"
      to: "admin/observability"
      via: "goto"
      pattern: "page\.goto\(.*admin\/observability"
---

<objective>
Deliver the admin observability dashboard and run a browser-driven design iteration with human verification per PRD user story US-7.

Purpose: Ensure new admin UI meets visual and functional expectations with feedback loop.
Output: Observability page, automated tests, screenshot workflow, and human-reviewed iteration.
</objective>

<execution_context>
@/Users/acedergr/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/acedergr/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.claude/reference/PRD.md
@apps/frontend/src/routes/admin/observability/+page.svelte
</context>

<tasks>

<task type="auto">
  <name>Build admin observability dashboard</name>
  <files>apps/frontend/src/routes/admin/observability/+page.svelte</files>
  <action>
  - Implement charts for agent traces, workflow timelines, and cost metrics using existing genui components.
  - Fetch data from `/api/admin/observability` and handle loading/error states gracefully.
  - Provide filters for timeframe and entity selection.
  </action>
  <verify>pnpm --filter @portal/frontend lint</verify>
  <done>Observability dashboard renders metrics with lint passing.</done>
</task>

<task type="auto">
  <name>Add automated coverage for observability UI</name>
  <files>apps/frontend/src/tests/phase10/admin-observability.test.ts</files>
  <action>
  - Create Vitest tests mocking observability API to ensure charts/tables render expected data.
  - Add Playwright (or equivalent) screenshot test `admin-screenshots.test.ts` capturing key layouts for design comparison.
  </action>
  <verify>
    pnpm --filter @portal/frontend test --run tests/phase10/admin-observability.test.ts
    pnpm --filter @portal/frontend test --run tests/phase10/admin-screenshots.test.ts
  </verify>
  <done>Automated tests validate observability UI rendering and capture screenshots for review.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Admin observability dashboard with design iteration screenshots</what-built>
  <how-to-verify>
    1. Run `pnpm --filter @portal/frontend dev` to start the frontend.
    2. Visit http://localhost:5173/admin/observability (ensure admin session) and exercise filters.
    3. Review generated screenshots under `apps/frontend/src/tests/phase10/__screenshots__/` for alignment with design goals.
    4. Provide feedback on layout, readability, and responsiveness.
  </how-to-verify>
  <resume-signal>Reply with "approved" to continue or describe feedback to incorporate.</resume-signal>
</task>

</tasks>

<verification>
- `pnpm --filter @portal/frontend lint`
- `pnpm --filter @portal/frontend test --run tests/phase10/admin-observability.test.ts`
- `pnpm --filter @portal/frontend test --run tests/phase10/admin-screenshots.test.ts`
</verification>

<success_criteria>

- Observability dashboard renders metrics with automated tests and human-reviewed design iteration complete.
  </success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-rewrite/10-18-SUMMARY.md`
</output>
